<script>

    $(document).ready(function () {
        var t = 0;
        var th = "getlist"
     
        $("#getlist").click(function () {
            $.ajax({
                url: '/GamerList/GetGamerList',
                type: 'POST',
                data: { ref1: 3 },
                success: function (response) {

                    console.log(response.data.length);
                    for (i = 0; i < response.data.length; i++) {
                        load(response.data, i);
                    }
                    $("#getlist").prop("disabled", true);

                },
                error: function (xhr) {
                    console.log("Error with get users list.");
                }
            })
        });
    });

    function load(data, i) {

        var row = '<tr><td>' + data[i].User + '</td><td>'
            + data[i].Name + '</td><td>'
            + data[i].Level + '</td><td>'
            + data[i].Agility + '</td><td>'
            + data[i].Defense + '</td><td>'
            + data[i].Strength + '</td><td>'
            + '<input type="button" id ="' + data[i].REF + '"' + 'value = "wyzwij">' + '</td></tr>';

        $row = $(row),
              resort = false;
        $('table')
          .append($row);
        return false;
    };

    $("body").on("click", "input", function () {
        var th = $(this).context.id;
        console.log("cos kliknieto", th);

       blockButton(th);

      
            $.ajax({
                url: '/Fight/CallToFight',
                type: 'POST',
                data: { ID: th,MyID:3 },
                success: function (response) {

                    console.log(response.Hero1);
                },
                error: function (xhr) {
                    console.log("Error with get users list.");
                }
            })
        });

    function blockButton(th) {

        var buttonID = "#" + th;
        $('#myTable :input').prop("disabled", true);

    }
</script>

<style>
    /*
    .myTable {
        display: table;
        width: 100px;
        border: 1px solid #000000;
    }

    .tableRow {
        width: 30px;
        height: 20px;
        display: table-row;
    }

    .tableCell {
        float: left;
        width: 100px;
        border: 1px solid #000000;
        display: table-cell;
    }*/

    table {
        background-color: #FFFFFF;
        border-collapse: collapse;
        border: 1px solid #000000;
        color: #000000;
        width: 100%;
    }

    tr {
        width: 120px;
    }

    td {
        border: 1px solid #000000;
        height: 10px;
        width: 120px;
    }
</style>

<a> </a>
<table id="myTable">
    <tr>
        <td>User</td>
        <td>Name</td>
        <td>Level</td>
        <td>Agility</td>
        <td>Strength</td>
        <td>Defense</td>
        <td>&nbsp;</td>
    </tr>
</table>